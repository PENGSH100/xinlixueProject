<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>工作记忆测量</title>
</head>
<style>
    #bg{
        width: 515px;
        height: 520px;
        border: 3px solid black;
        background-color:#D9D9D9;
        position: relative;
        margin: 0 auto;
        top: 30px;
    }

    #cover{
        width: 515px;
        height: 525px;
        border: 3px solid red;
        position: relative;
        margin: 0 auto;
        top: -500px;
        background-color: #D9D9D9;
        z-index: 100;
        display: none;
    }
    #cover1{
        width: 515px;
        height: 525px;
        border: 3px solid red;
        position: relative;
        margin: 0 auto;
        top: -500px;
        background-color: #D9D9D9;
        z-index: 100;
        display: none;
    }
    #f0{
        position: relative;
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
        display: none;

    }
    #f1{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f2{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f3{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 0px;
/*
        visibility: hidden;
*/
    }
    #f4{
        position: relative;
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f5{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f6{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f7{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 0px;
/*
        visibility: hidden;
*/
    }
    #f8{
        position: relative;
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f9{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f10{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f11{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 00px;
/*
        visibility: hidden;
*/
    }
    #f12{
        position: relative;
        margin-top: 20px;
        margin-left: 20px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f13{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f14{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 10px;
/*
        visibility: hidden;
*/
    }
    #f15{
        position: relative;
        margin-top: 20px;
        margin-left: 10px;
        margin-right: 0px;
       /* visibility: hidden;*/
    }
</style>

<body>
<div id="bg">
    <div>
        <div id="f0" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f1" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f2" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f3" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
    </div>

    <div id="bg02" style=" width: 515px;height: 100px;">
        <div id="f4" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f5" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f6" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f7" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
    </div>

    <div id="bg03" style=" width: 515px;height: 100px;">
        <div id="f8" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f9" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f10" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f11" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
    </div>

    <div id="bg04" style=" width: 515px;height: 100px;">
        <div id="f12" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f13" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f14" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
        <div id="f15" style=" width: 100px;height: 100px;float:left;display: inline-block;"></div>
    </div>


</div>
<div id="cover">
    <img class="jia" src="img/jia.svg" width="100px" height="100px"/>
    <p>一次实验开始</p>
</div>
<div id="cover1">
    <p>
        颜色改变
    </p>
</div>
</body>
<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript">
    let times=0;	//页面刷新次数
    let sub=0;//被试编号
    window.onload=function(){
        xianshiOne();
    };


      function xianshiOne() {
          $("#cover").show();
          $("#cover").delay(500).hide(0);
        var settings = {
            "url": "http://localhost:8080/xinlixue2/pictureFills",
            "method": "GET",
            "timeout": 0,
        };
        $.ajax(settings).done(function (response) {
            document.getElementById("f0").style.backgroundColor='#D9D9D9';
            document.getElementById("f1").style.backgroundColor='#D9D9D9';
            document.getElementById("f2").style.backgroundColor='#D9D9D9';
            document.getElementById("f3").style.backgroundColor='#D9D9D9';
            document.getElementById("f4").style.backgroundColor='#D9D9D9';
            document.getElementById("f5").style.backgroundColor='#D9D9D9';
            document.getElementById("f6").style.backgroundColor='#D9D9D9';
            document.getElementById("f7").style.backgroundColor='#D9D9D9';
            document.getElementById("f8").style.backgroundColor='#D9D9D9';
            document.getElementById("f9").style.backgroundColor='#D9D9D9';
            document.getElementById("f10").style.backgroundColor='#D9D9D9';
            document.getElementById("f11").style.backgroundColor='#D9D9D9';
            document.getElementById("f12").style.backgroundColor='#D9D9D9';
            document.getElementById("f13").style.backgroundColor='#D9D9D9';
            document.getElementById("f14").style.backgroundColor='#D9D9D9';
            document.getElementById("f15").style.backgroundColor='#D9D9D9';
            var data=response.result;
            var random=data.randomList;
            console.log(random);
            var color=data.colorList;
            console.log(color);
            var change=data.change;
            var changeColorList=data.changeColorList;
            console.log(changeColorList);
            var a1=random[0];
            var b1=random[1];
            var c1=random[2];
            var d1=random[3];
            var e1=random[4];

            $("#f"+a1).show(5000);
            $("#f"+b1).show(5000);
            $("#f"+c1).show(5000);
            $("#f"+d1).show(5000);
            $("#f"+e1).show(5000);
            document.getElementById("f"+a1).style.backgroundColor = color[0];
            document.getElementById("f"+b1).style.backgroundColor = color[1];
            document.getElementById("f"+c1).style.backgroundColor = color[2];
            document.getElementById("f"+d1).style.backgroundColor = color[3];
            document.getElementById("f"+e1).style.backgroundColor = color[4];
            setTimeout(function () {
                $("#cover1").show();
                $("#cover1").delay(5000).hide(0);
                document.getElementById("f"+a1).style.backgroundColor = changeColorList[0];
                document.getElementById("f"+b1).style.backgroundColor = changeColorList[1];
                document.getElementById("f"+c1).style.backgroundColor = changeColorList[2];
                document.getElementById("f"+d1).style.backgroundColor = changeColorList[3];
                document.getElementById("f"+e1).style.backgroundColor = changeColorList[4];
                document.getElementById("f0").onclick = function(){
                    chooose=0;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    //记录数据，进行下一次实验；
                    xianshiOne( );
                };
                document.getElementById("f1").onclick = function(){
                     chooose=1;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f2").onclick = function(){
                    chooose=2;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f3").onclick = function(){
                    chooose=3;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f4").onclick = function(){
                    chooose=4;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f5").onclick = function(){
                    chooose=5;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f6").onclick = function(){
                    chooose=6;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f7").onclick = function(){
                    chooose=7;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f8").onclick = function(){
                    chooose=8;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f9").onclick = function(){
                    chooose=9;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f10").onclick = function(){
                    chooose=10;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f11").onclick = function(){
                    chooose=11;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f12").onclick = function(){
                    chooose=12;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f13").onclick = function(){
                     chooose=13;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f14").onclick = function(){
                      chooose=14;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
                document.getElementById("f15").onclick = function(){
                     chooose=15;
                    console.log("change+"+chooose);
                    getTimesResult(sub,change,chooose);
                    xianshiOne( );
                };
            }, 5000);
          //



        });

    }
    //这里是第二次显示 然后 让被试选择出被改变的方块
    function xianshiTwo(random,color,changeColorList,change) {
        times++;
        console.log("当前实验次数： "+times);
        console.log("changeColorList： " + changeColorList);
        var a=random[0];
        var b=random[1];
        var c=random[2];
        var d=random[3];
        var e=random[4];

       /* $("#f"+a).show(0);
        $("#f"+b).show(0);
        $("#f"+c).show(0);
        $("#f"+d).show(0);
        $("#f"+e).show(0);*/


        document.getElementById("f"+a).style.backgroundColor = changeColorList[0];
        document.getElementById("f"+b).style.backgroundColor = changeColorList[1];
        document.getElementById("f"+c).style.backgroundColor = changeColorList[2];
        document.getElementById("f"+d).style.backgroundColor = changeColorList[3];
        document.getElementById("f"+e).style.backgroundColor = changeColorList[4];



        var chooose;//被点击方块的id
        document.getElementById("f0").onclick = function(){
            chooose=0;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            //记录数据，进行下一次实验；
            xianshiOne( );
        };
        document.getElementById("f1").onclick = function(){
            chooose=1;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f2").onclick = function(){
            chooose=2;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f3").onclick = function(){
            chooose=3;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f4").onclick = function(){
            chooose=4;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f5").onclick = function(){
            chooose=5;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f6").onclick = function(){
            chooose=6;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f7").onclick = function(){
            chooose=7;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f8").onclick = function(){
            chooose=8;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f9").onclick = function(){
            chooose=9;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f10").onclick = function(){
            chooose=10;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f11").onclick = function(){
            chooose=11;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f12").onclick = function(){
            chooose=12;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f13").onclick = function(){
            chooose=13;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f14").onclick = function(){
            chooose=14;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        document.getElementById("f15").onclick = function(){
            chooose=15;
            console.log("change+"+chooose);
            getTimesResult(sub,change,chooose);
            xianshiOne( );
        };
        console.log("yigchangle: "+ chooose);
    }


    function sortArray(array) {
        var m = array.length,
            t, i;
        while (m) {
            i = Math.floor(Math.random() * m--);
            t = array[m];
            array[m] = array[i];
            array[i] = t;
        }
        return array;
    }
    /**
     * 这个是请求保存结果的接口
     */
    function getTimesResult(sub,change,choose) {
        console.log("getTimesResult 封装成json数据为：" + JSON.stringify({"sub":sub,"change":change,"choose":choose}));
        var settings = {
            "url": "http://localhost:8080/xinlixue2/saveResultTwo",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({"sub":sub,"change":change,"choose":choose}),
        };
        $.ajax(settings).done(function (response) {
            console.log("getTimesResult save result success"+response.toString());

        });


    }

   /* function main(){
        var settings = {
            "url": "http://localhost:8080/xinlixue2/pictureFills",
            "method": "GET",
            "timeout": 0,
        };
        $.ajax(settings).done(function (response) {
            var data=response.result;
            var random=data.randomList;
            console.log(random);
            var color=data.colorList;
            console.log(color);


        });




        //需要记录的数据：被试编号；变化色块编号；被试选择的色块的编号；被试是否选择正确；
        //1.生成一个数组，里面为1-16，打乱顺序，随机取5个；
        var random=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
        console.log(random);
        sortArray(random);
        console.log(random);
        //2.设置一个颜色s数组，颜色为：blue, green, red, yellow, brown, magenta,lime green, cyan，将这些颜色随机设置为5个色块的背景色
        var color=["blue","red","green","yellow","brown","magenta","lime","cyan"]
        sortArray(color);
        console.log(color);

        a=random[0];
        b=random[1];
        c=random[2];
        d=random[3];
        e=random[4];
        console.log(a);





        //3.在这5个随机数中再抽取一个，改变色块颜色;
        //4.被试点击选择是哪个色块颜色发生了改变，写函数判断被点击的色块是否是颜色发生改变的色块



    }*/








</script>
</html>
